# üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞ –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä–µ

–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∑–∞–ø—É—Å–∫—É `for_klaster.py` –Ω–∞ SLURM –∫–ª–∞—Å—Ç–µ—Ä–µ.

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞](#1-–ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è-–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞)
2. [–°–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–∞](#2-—Å–±–æ—Ä–∫–∞-docker-–æ–±—Ä–∞–∑–∞)
3. [–ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ Docker Hub](#3-–ø—É–±–ª–∏–∫–∞—Ü–∏—è-–≤-docker-hub)
4. [–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –æ–±—Ä–∞–∑–∞ —á–µ—Ä–µ–∑ enroot](#4-–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è-–æ–±—Ä–∞–∑–∞-—á–µ—Ä–µ–∑-enroot)
5. [–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ slurm-master](#5-–∑–∞–≥—Ä—É–∑–∫–∞-–Ω–∞-slurm-master)
6. [–ó–∞–ø—É—Å–∫ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞](#6-–∑–∞–ø—É—Å–∫-—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞)
7. [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤](#7-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥-–∏-–ø–æ–ª—É—á–µ–Ω–∏–µ-—Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤)
8. [–ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã SLURM](#8-–ø–æ–ª–µ–∑–Ω—ã–µ-–∫–æ–º–∞–Ω–¥—ã-slurm)

---

## 1. –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ñ–∞–π–ª—ã:

```
Llabs/
‚îú‚îÄ‚îÄ for_klaster.py          # –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞
‚îú‚îÄ‚îÄ Dockerfile              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Docker –æ–±—Ä–∞–∑–∞
‚îú‚îÄ‚îÄ .dockerignore           # –ò—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è Docker
‚îú‚îÄ‚îÄ run.sh                  # –°–∫—Ä–∏–ø—Ç –¥–ª—è sbatch
‚îú‚îÄ‚îÄ requirements.txt        # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îú‚îÄ‚îÄ pyproject.toml          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Poetry
‚îú‚îÄ‚îÄ data/                   # –î–∞–Ω–Ω—ã–µ –¥–ª—è LDA (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∫–ª—é—á–µ–Ω—ã!)
‚îÇ   ‚îú‚îÄ‚îÄ X_*_val_bow.npz     # –í–∞–ª–∏–¥–∞—Ü–∏–æ–Ω–Ω—ã–µ –¥–∞—Ç–∞—Å–µ—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ pabbo_method/           # PABBO –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
‚îú‚îÄ‚îÄ lda_hyperopt/           # LDA –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
‚îî‚îÄ‚îÄ ...
```

### –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç

–°–∫—Ä–∏–ø—Ç `for_klaster.py` –∏—â–µ—Ç –¥–∞—Ç–∞—Å–µ—Ç—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `data/`:

```bash
ls data/X_*_val_bow.npz
```

–ï—Å–ª–∏ –¥–∞—Ç–∞—Å–µ—Ç—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç, —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏—Ö –≤ `data/` –∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç–µ –ø—É—Ç–∏ –≤ –∫–æ–¥–µ.

---

## 2. –°–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–∞

### –î–ª—è Linux/Intel Mac:

```bash
docker build -t llabs_lda_hyperopt .
```

### –î–ª—è Apple Silicon (M1/M2/M3):

```bash
docker buildx build --platform linux/amd64 -t llabs_lda_hyperopt .
```

**–í–∞–∂–Ω–æ:** –ö–ª–∞—Å—Ç–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É x86_64, –ø–æ—ç—Ç–æ–º—É –Ω—É–∂–Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ `linux/amd64`.

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –æ–±—Ä–∞–∑ —Å–æ–±—Ä–∞–ª—Å—è
docker images | grep llabs_lda_hyperopt

# –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ
docker run --rm llabs_lda_hyperopt python3 -c "import torch; print('OK')"
```

---

## 3. –ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ Docker Hub

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤ Docker Hub:

```bash
docker login
# –í–≤–µ–¥–∏—Ç–µ username –∏ password
```

### –¢–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏—è:

–ó–∞–º–µ–Ω–∏—Ç–µ `YOUR_DOCKERHUB_USERNAME` –Ω–∞ –≤–∞—à username:

```bash
# –¢–µ–≥–∏—Ä—É–µ–º –æ–±—Ä–∞–∑
docker tag llabs_lda_hyperopt YOUR_DOCKERHUB_USERNAME/llabs_lda_hyperopt:latest

# –ü—É–±–ª–∏–∫—É–µ–º –≤ Docker Hub
docker push YOUR_DOCKERHUB_USERNAME/llabs_lda_hyperopt:latest
```

**–ü—Ä–∏–º–µ—Ä:**
```bash
docker tag llabs_lda_hyperopt pansershrek/llabs_lda_hyperopt:v1
docker push pansershrek/llabs_lda_hyperopt:v1
```

---

## 4. –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –æ–±—Ä–∞–∑–∞ —á–µ—Ä–µ–∑ enroot

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –≤–∏—Ä—Ç—É–∞–ª–∫–µ —Å enroot:

```bash
ssh -p 2295 mmp@188.44.41.125
```

### –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è Docker –æ–±—Ä–∞–∑–∞ –≤ .sqsh:

```bash
# –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –æ–±—Ä–∞–∑ –∏–∑ Docker Hub
sudo enroot import docker://YOUR_DOCKERHUB_USERNAME/llabs_lda_hyperopt:latest
```

**–ü—Ä–∏–º–µ—Ä:**
```bash
sudo enroot import docker://pansershrek/llabs_lda_hyperopt:v1
```

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è enroot –≤—ã–≤–µ–¥–µ—Ç –ø—É—Ç—å –∫ `.sqsh` —Ñ–∞–π–ª—É:

```
[INFO] Importing Docker image
...
[INFO] Image saved to: /home/mmp/YOUR_DOCKERHUB_USERNAME+llabs_lda_hyperopt+v1.sqsh
```

–ó–∞–ø–æ–º–Ω–∏—Ç–µ —ç—Ç–æ—Ç –ø—É—Ç—å!

---

## 5. –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ slurm-master

### –°–∫–∞—á–∞—Ç—å .sqsh —Å –≤–∏—Ä—Ç—É–∞–ª–∫–∏ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π –∫–æ–º–ø—å—é—Ç–µ—Ä:

–û—Ç–∫—Ä–æ–π—Ç–µ **–Ω–æ–≤—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª** –Ω–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ:

```bash
scp -P 2295 mmp@188.44.41.125:/home/mmp/YOUR_DOCKERHUB_USERNAME+llabs_lda_hyperopt+v1.sqsh .
```

### –ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–∞ slurm-master:

–ó–∞–º–µ–Ω–∏—Ç–µ `YOUR_USERNAME` –Ω–∞ –≤–∞—à username –Ω–∞ slurm-master:

```bash
scp llabs_lda_hyperopt.sqsh YOUR_USERNAME@10.36.60.202:/scratch/YOUR_USERNAME/
```

**–ü—Ä–∏–º–µ—Ä:**
```bash
scp YOUR_DOCKERHUB_USERNAME+llabs_lda_hyperopt+v1.sqsh g.skiba@10.36.60.202:/scratch/g.skiba/llabs_lda_hyperopt.sqsh
```

### –ó–∞–≥—Ä—É–∑–∏—Ç—å run.sh –Ω–∞ slurm-master:

```bash
scp run.sh YOUR_USERNAME@10.36.60.202:/scratch/YOUR_USERNAME/
```

---

## 6. –ó–∞–ø—É—Å–∫ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ slurm-master:

```bash
ssh YOUR_USERNAME@10.36.60.202
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ tmux (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):

–ï—Å–ª–∏ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –æ—Ç–∫–ª—é—á–∞—Ç—å—Å—è –æ—Ç —Å–µ—Å—Å–∏–∏, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `tmux`:

```bash
# –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —Å–µ—Å—Å–∏—é
tmux new -s lda_experiment

# –û—Ç–∫–ª—é—á–∏—Ç—å—Å—è –æ—Ç —Å–µ—Å—Å–∏–∏ (–Ω–µ –∑–∞–≤–µ—Ä—à–∞—è –µ—ë): Ctrl+b, –∑–∞—Ç–µ–º d
# –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–µ—Å—Å–∏–∏ –ø–æ–∑–∂–µ:
tmux a -t lda_experiment
```

### –ü–µ—Ä–µ–π—Ç–∏ –≤ —Ä–∞–±–æ—á—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é:

```bash
cd /scratch/$USER
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å run.sh:

–û—Ç–∫—Ä–æ–π—Ç–µ `run.sh` –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—É—Ç—å –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π:

```bash
nano run.sh
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä–æ–∫—É:
```bash
CONTAINER_IMAGE="./llabs_lda_hyperopt.sqsh"
```

### –ó–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–¥–∞—á—É —á–µ—Ä–µ–∑ sbatch:

```bash
sbatch run.sh
```

–í—ã –ø–æ–ª—É—á–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:
```
Submitted batch job 12345
```

–ì–¥–µ `12345` - —ç—Ç–æ ID –≤–∞—à–µ–π –∑–∞–¥–∞—á–∏.

---

## 7. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏:

```bash
squeue -u $USER
```

**–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ —Å—Ç–∞—Ç—É—Å–æ–≤:**
- `PD` (Pending) - –∑–∞–¥–∞—á–∞ –≤ –æ—á–µ—Ä–µ–¥–∏, –æ–∂–∏–¥–∞–µ—Ç —Ä–µ—Å—É—Ä—Å–æ–≤
- `R` (Running) - –∑–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
- `CG` (Completing) - –∑–∞–¥–∞—á–∞ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è
- –ï—Å–ª–∏ –∑–∞–¥–∞—á–∏ –Ω–µ—Ç –≤ —Å–ø–∏—Å–∫–µ - –æ–Ω–∞ –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏:

```bash
# –û—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥ (–∑–∞–º–µ–Ω–∏—Ç—å 12345 –Ω–∞ –≤–∞—à job ID)
tail -f slurm-12345.out

# –õ–æ–≥ –æ—à–∏–±–æ–∫
tail -f slurm-12345.err
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —á–µ—Ä–µ–∑ Grafana:

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
http://10.36.60.3:3000/
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:

–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤:
```bash
/scratch/$USER/lda_results/
```

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:
```bash
ls -lh /scratch/$USER/lda_results/
```

### –°–∫–∞—á–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π –∫–æ–º–ø—å—é—Ç–µ—Ä:

–û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª –Ω–∞ **–≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ**:

```bash
# –°–∫–∞—á–∞—Ç—å –≤—Å—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
scp -r YOUR_USERNAME@10.36.60.202:/scratch/YOUR_USERNAME/lda_results/ ./local_results/

# –ò–ª–∏ —Å–∫–∞—á–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ñ–∞–π–ª—ã
scp YOUR_USERNAME@10.36.60.202:/scratch/YOUR_USERNAME/lda_results/run_cluster_*/logs/pipeline_main.log ./
```

---

## 8. –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã SLURM

### –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—á–µ—Ä–µ–¥–∏ –∑–∞–¥–∞—á:

```bash
# –í—Å–µ –∑–∞–¥–∞—á–∏ –≤ –æ—á–µ—Ä–µ–¥–∏
squeue

# –¢–æ–ª—å–∫–æ –≤–∞—à–∏ –∑–∞–¥–∞—á–∏
squeue -u $USER

# –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–¥–∞—á–µ
scontrol show job 12345
```

### –û—Ç–º–µ–Ω–∞ –∑–∞–¥–∞—á–∏:

```bash
# –û—Ç–º–µ–Ω–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –∑–∞–¥–∞—á—É
scancel 12345

# –û—Ç–º–µ–Ω–∏—Ç—å –≤—Å–µ –≤–∞—à–∏ –∑–∞–¥–∞—á–∏
scancel -u $USER
```

### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∞—Å—Ç–µ—Ä–µ:

```bash
# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –Ω–æ–¥–∞—Ö
sinfo

# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–∞—Ö
sinfo -N -l
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞–¥–∞—á:

```bash
# –ò—Å—Ç–æ—Ä–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á
sacct -u $USER

# –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω–æ–π –∑–∞–¥–∞—á–µ
sacct -j 12345 --format=JobID,JobName,State,ExitCode,Elapsed,MaxRSS
```

---

## üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è

**–û—à–∏–±–∫–∞:**
```
srun: error: Unable to open container image
```

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `.sqsh` —Ñ–∞–π–ª –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `/scratch/$USER/`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç—å –≤ `run.sh` (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∞–±—Å–æ–ª—é—Ç–Ω—ã–π –∏–ª–∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π)
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ –Ω–∞ —á—Ç–µ–Ω–∏–µ:
  ```bash
  chmod 644 /scratch/$USER/llabs_lda_hyperopt.sqsh
  ```

### –ü—Ä–æ–±–ª–µ–º–∞: –î–∞–Ω–Ω—ã–µ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ

**–û—à–∏–±–∫–∞ –≤ –ª–æ–≥–∞—Ö:**
```
FileNotFoundError: No such file or directory: '/app/data/...'
```

**–†–µ—à–µ–Ω–∏–µ:**
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –≤–∫–ª—é—á–µ–Ω—ã –≤ Docker –æ–±—Ä–∞–∑ (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ `.dockerignore`)
- –ò–ª–∏ —Å–º–æ–Ω—Ç–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏–∑–≤–Ω–µ, –æ–±–Ω–æ–≤–∏–≤ `run.sh`:
  ```bash
  --container-mounts "$RESULTS_DIR:/app/lda_pipeline_results,/scratch/$USER/data:/app/data"
  ```

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–∞–º—è—Ç–∏

**–û—à–∏–±–∫–∞:**
```
slurmstepd: error: Detected ... OOM (Out Of Memory) event
```

**–†–µ—à–µ–Ω–∏–µ:**
–î–æ–±–∞–≤—å—Ç–µ –≤ `run.sh`:
```bash
#SBATCH --mem=256G  # –ó–∞–ø—Ä–æ—Å–∏—Ç—å 256GB RAM
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ó–∞–¥–∞—á–∞ –≤–∏—Å–∏—Ç –≤ –æ—á–µ—Ä–µ–¥–∏ (PD) –¥–æ–ª–≥–æ

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–≤–æ–±–æ–¥–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä–µ

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—á–µ—Ä–µ–¥—å: `squeue`
- –£–º–µ–Ω—å—à–∏—Ç–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–µ —Ä–µ—Å—É—Ä—Å—ã –≤ `run.sh`
- –ü–æ–¥–æ–∂–¥–∏—Ç–µ, –ø–æ–∫–∞ –æ—Å–≤–æ–±–æ–¥—è—Ç—Å—è —Ä–µ—Å—É—Ä—Å—ã

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤ `/scratch/$USER/lda_results/` –±—É–¥–µ—Ç:

```
lda_results/
‚îî‚îÄ‚îÄ run_cluster_4core_YYYYMMDD_HHMMSS/
    ‚îú‚îÄ‚îÄ logs/
    ‚îÇ   ‚îú‚îÄ‚îÄ pipeline_main.log          # –ì–ª–∞–≤–Ω—ã–π –ª–æ–≥
    ‚îÇ   ‚îî‚îÄ‚îÄ pipeline_metrics.json       # –ú–µ—Ç—Ä–∏–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
    ‚îú‚îÄ‚îÄ experiments/                    # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤
    ‚îÇ   ‚îú‚îÄ‚îÄ 20news/
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ GA/
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ES/
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PABBO_Small/
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ PABBO_Large/
    ‚îÇ   ‚îî‚îÄ‚îÄ ...
    ‚îú‚îÄ‚îÄ aggregated_results/             # –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
    ‚îÇ   ‚îú‚îÄ‚îÄ all_results.csv
    ‚îÇ   ‚îú‚îÄ‚îÄ statistics.json
    ‚îÇ   ‚îú‚îÄ‚îÄ perplexity_comparison.png
    ‚îÇ   ‚îú‚îÄ‚îÄ time_comparison.png
    ‚îÇ   ‚îî‚îÄ‚îÄ perplexity_boxplots.png
    ‚îî‚îÄ‚îÄ all_results.json                # –ü–æ–ª–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ JSON
```

---

## üéØ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (—à–ø–∞—Ä–≥–∞–ª–∫–∞)

```bash
# 1. –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞ (–Ω–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ)
docker buildx build --platform linux/amd64 -t llabs_lda_hyperopt .

# 2. –ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ Docker Hub
docker tag llabs_lda_hyperopt YOUR_USERNAME/llabs_lda_hyperopt:v1
docker push YOUR_USERNAME/llabs_lda_hyperopt:v1

# 3. –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ .sqsh (–Ω–∞ –≤–∏—Ä—Ç—É–∞–ª–∫–µ —Å enroot)
ssh -p 2295 mmp@188.44.41.125
sudo enroot import docker://YOUR_USERNAME/llabs_lda_hyperopt:v1
exit

# 4. –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ slurm-master
scp -P 2295 mmp@188.44.41.125:/home/mmp/YOUR_USERNAME+llabs_lda_hyperopt+v1.sqsh .
scp YOUR_USERNAME+llabs_lda_hyperopt+v1.sqsh YOUR_USERNAME@10.36.60.202:/scratch/$USER/llabs_lda_hyperopt.sqsh
scp run.sh YOUR_USERNAME@10.36.60.202:/scratch/$USER/

# 5. –ó–∞–ø—É—Å–∫ –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä–µ
ssh YOUR_USERNAME@10.36.60.202
cd /scratch/$USER
sbatch run.sh

# 6. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
squeue -u $USER
tail -f slurm-*.out
```

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è SLURM: https://slurm.schedmd.com/
- Grafana –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: http://10.36.60.3:3000/
- –ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏ –≤ `slurm-*.out` –∏ `slurm-*.err`

---

**–£–¥–∞—á–∏ —Å –∑–∞–ø—É—Å–∫–æ–º —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤! üöÄ**